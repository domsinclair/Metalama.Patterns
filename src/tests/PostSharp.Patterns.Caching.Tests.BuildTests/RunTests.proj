<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="4.0">

  <Import Project="..\..\..\Root.props" />

  <!-- Specify build test suite properties here. -->
  <PropertyGroup>
    <BuildTestBaseDir>$(MSBuildThisFileDirectory)</BuildTestBaseDir>
    <BuildTestProjectFile>$(MSBuildThisFileDirectory)$(MSBuildThisFile)</BuildTestProjectFile>
    <BuildTestLicenseDirectory>$(MSBuildThisFileDirectory)..\..\..\PrivateBuild\Keys\TestLicenses</BuildTestLicenseDirectory>
    <BuildTestSuiteName>PostSharp.Patterns.Caching.BuildTests</BuildTestSuiteName>
    <PostSharpBuild Condition="'$(PostSharpBuild)'==''">Debug</PostSharpBuild>
  </PropertyGroup>
   
  <PropertyGroup Condition="'$(TestTargetFramework)' == 'NET'">
    <TargetFrameworkVersion>v4.6.1</TargetFrameworkVersion>
  </PropertyGroup>

  <Import Project="$(PostSharpTestingDir)\PostSharp.BuildTests.proj" />
  <Import Project="$(PostSharpPatternsBuildDir)BuildTest.props" />

  <ItemGroup>
    <Reference Include="PostSharp">
      <HintPath>$(PostSharpDllPath)</HintPath>
    </Reference>
  </ItemGroup>

  <!-- Add test suite references here. -->
  <ItemGroup Condition="'$(TestTargetFramework)' == 'NET'">
    <Reference Include="PostSharp.Patterns.Common">
      <HintPath>$(PostSharpPatternsBinDir)$(Configuration)\net46\PostSharp.Patterns.Common.dll</HintPath>
      <Project>$(PostSharpPatternsDir)Common\PostSharp.Patterns.Common\PostSharp.Patterns.Common.csproj</Project>
      <ProjectTargetFramework>net46</ProjectTargetFramework>
    </Reference>
    <Reference Include="PostSharp.Patterns.Caching">
      <HintPath>$(PostSharpPatternsBinDir)$(Configuration)\net46\PostSharp.Patterns.Caching.dll</HintPath>
      <Project>$(PostSharpPatternsDir)Caching\PostSharp.Patterns.Caching\PostSharp.Patterns.Caching.csproj</Project>
      <ProjectTargetFramework>net46</ProjectTargetFramework>
    </Reference>
    <Reference Include="PostSharp.Patterns.TestHelpers">
      <HintPath>..\PostSharp.Patterns.TestHelpers\bin\$(Configuration)\net452\PostSharp.Patterns.TestHelpers.dll</HintPath>
      <Project>$(PostSharpDir)Tests\Patterns\PostSharp.Patterns.TestHelpers\PostSharp.Patterns.TestHelpers.csproj</Project>
      <ProjectTargetFramework>net452</ProjectTargetFramework>
    </Reference>
    <Reference Include="PostSharp.Patterns.Caching.TestHelpers">
      <HintPath>..\PostSharp.Patterns.Caching.TestHelpers\bin\$(Configuration)\net461\PostSharp.Patterns.Caching.TestHelpers.dll</HintPath>
      <Project>$(PostSharpDir)Tests\Patterns\PostSharp.Patterns.Caching.TestHelpers\PostSharp.Patterns.Caching.TestHelpers.csproj</Project>
      <ProjectTargetFramework>net461</ProjectTargetFramework>
    </Reference>

    <StaticPackageReference Include="System.Collections.Immutable" Version="1.3.1" />
    
    <BuildAssetProjects Include="..\PostSharp.Patterns.TestHelpers\PostSharp.Patterns.TestHelpers.csproj" TargetFramework="net452" />
    <BuildAssetProjects Include="..\PostSharp.Patterns.Caching.TestHelpers\PostSharp.Patterns.Caching.TestHelpers.csproj" TargetFramework="net461" />

  </ItemGroup> 

  <Import Project="RunTests.NetCore.properties" Condition="'$(TestTargetFramework)' == 'NETCore'" />

  <PropertyGroup Condition="'$(TestTargetFramework)' == 'NETCore'">
    <PatternsTargetFramework Condition="'$(TestTargetFrameworkVersion)' &gt;= '2.0'">netstandard2.0</PatternsTargetFramework>
    <PatternsTargetFramework Condition="'$(TestTargetFrameworkVersion)' &gt;= '5.0'">net5.0</PatternsTargetFramework>
    <PatternsTargetFramework Condition="'$(TestTargetFrameworkVersion)' &gt;= '6.0'">net6.0</PatternsTargetFramework>
  </PropertyGroup>

  <ItemGroup Condition="'$(TestTargetFramework)' == 'NETCore'">
    <Reference Include="PostSharp.Patterns.Common">
      <HintPath>$(PostSharpPatternsBinDir)$(Configuration)\$(PatternsTargetFramework)\PostSharp.Patterns.Common.dll</HintPath>
      <Project>$(PostSharpPatternsDir)Common\PostSharp.Patterns.Common\PostSharp.Patterns.Common.csproj</Project>
      <ProjectTargetFramework>$(PatternsTargetFramework)</ProjectTargetFramework>
    </Reference>
    <Reference Include="PostSharp.Patterns.Caching">
      <HintPath>$(PostSharpPatternsBinDir)$(Configuration)\$(PatternsTargetFramework)\PostSharp.Patterns.Caching.dll</HintPath>
      <Project>$(PostSharpPatternsDir)Caching\PostSharp.Patterns.Caching\PostSharp.Patterns.Caching.csproj</Project>
      <ProjectTargetFramework>$(PatternsTargetFramework)</ProjectTargetFramework>
    </Reference>
    <Reference Include="PostSharp.Patterns.TestHelpers">
      <HintPath>..\PostSharp.Patterns.TestHelpers\bin\$(Configuration)\$(PatternsTargetFramework)\PostSharp.Patterns.TestHelpers.dll</HintPath>
      <Project>$(PostSharpDir)Tests\Patterns\PostSharp.Patterns.TestHelpers\PostSharp.Patterns.TestHelpers.csproj</Project>
      <ProjectTargetFramework>$(PatternsTargetFramework)</ProjectTargetFramework>
    </Reference>
    <Reference Include="PostSharp.Patterns.Caching.TestHelpers">
      <HintPath>..\PostSharp.Patterns.Caching.TestHelpers\bin\$(Configuration)\$(PatternsTargetFramework)\PostSharp.Patterns.Caching.TestHelpers.dll</HintPath>
      <Project>$(PostSharpDir)Tests\Patterns\PostSharp.Patterns.Caching.TestHelpers\PostSharp.Patterns.Caching.TestHelpers.csproj</Project>
      <ProjectTargetFramework>$(PatternsTargetFramework)</ProjectTargetFramework>
    </Reference>

    <BuildAssetProjects Include="..\PostSharp.Patterns.TestHelpers\PostSharp.Patterns.TestHelpers.csproj" TargetFramework="$(PatternsTargetFramework)" />
    <BuildAssetProjects Include="..\PostSharp.Patterns.Caching.TestHelpers\PostSharp.Patterns.Caching.TestHelpers.csproj" TargetFramework="$(PatternsTargetFramework)" />

  </ItemGroup>
  
</Project>
